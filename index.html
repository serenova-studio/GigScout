<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gig Scoutï½œæ¡ˆä»¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Space+Mono:wght@400;700&display=swap');

  :root {
    --bg: #0d0f14;
    --surface: #161920;
    --surface2: #1e2230;
    --border: #2a2f3f;
    --accent: #00e5a0;
    --accent2: #0066ff;
    --text: #e8eaf0;
    --text-muted: #6b7280;
    --danger: #ff4d6d;
    --warning: #ffb800;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Noto Sans JP', sans-serif;
    min-height: 100vh;
    padding: 0;
  }

  /* Header */
  .header {
    background: linear-gradient(135deg, #0d0f14 0%, #161920 100%);
    border-bottom: 1px solid var(--border);
    padding: 20px 32px;
    display: flex;
    align-items: center;
    gap: 16px;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .header-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }

  .header h1 {
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: 0.05em;
  }

  .header p {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 2px;
  }

  /* Layout */
  .layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    min-height: calc(100vh - 81px);
  }

  .left-panel {
    padding: 32px;
    overflow-y: auto;
    border-right: 1px solid var(--border);
  }

  .right-panel {
    padding: 32px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    position: sticky;
    top: 81px;
    height: calc(100vh - 81px);
    overflow-y: auto;
  }

  /* Section */
  .section {
    margin-bottom: 28px;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
  }

  .section-badge {
    width: 6px;
    height: 22px;
    border-radius: 3px;
  }

  .badge-blue { background: var(--accent2); }
  .badge-green { background: var(--accent); }
  .badge-red { background: var(--danger); }
  .badge-yellow { background: var(--warning); }

  .section-title {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-muted);
  }

  .save-hint {
    margin-left: auto;
    font-size: 11px;
    color: var(--accent);
    background: rgba(0, 229, 160, 0.1);
    padding: 3px 8px;
    border-radius: 4px;
    border: 1px solid rgba(0, 229, 160, 0.2);
  }

  /* Form */
  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 12px;
  }

  .form-group {
    margin-bottom: 12px;
  }

  label {
    display: block;
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 6px;
    font-weight: 500;
  }

  input, textarea, select {
    width: 100%;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    padding: 10px 12px;
    transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
    resize: vertical;
  }

  input:focus, textarea:focus, select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0, 229, 160, 0.1);
  }

  textarea { min-height: 80px; }

  /* Tags input */
  .tags-container {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    min-height: 44px;
    cursor: text;
    transition: border-color 0.2s;
  }

  .tags-container:focus-within {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0, 229, 160, 0.1);
  }

  .tag {
    display: flex;
    align-items: center;
    gap: 4px;
    background: rgba(0, 229, 160, 0.15);
    border: 1px solid rgba(0, 229, 160, 0.3);
    color: var(--accent);
    padding: 3px 8px;
    border-radius: 5px;
    font-size: 12px;
    font-weight: 500;
  }

  .tag.ng {
    background: rgba(255, 77, 109, 0.15);
    border-color: rgba(255, 77, 109, 0.3);
    color: var(--danger);
  }

  .tag.must {
    background: rgba(0, 102, 255, 0.15);
    border-color: rgba(0, 102, 255, 0.3);
    color: #5599ff;
  }

  .tag.nice {
    background: rgba(255, 184, 0, 0.15);
    border-color: rgba(255, 184, 0, 0.3);
    color: var(--warning);
  }

  .tag-remove {
    cursor: pointer;
    opacity: 0.7;
    font-size: 14px;
    line-height: 1;
  }

  .tag-remove:hover { opacity: 1; }

  .tag-input {
    background: transparent;
    border: none;
    outline: none;
    color: var(--text);
    font-size: 13px;
    padding: 3px 4px;
    min-width: 80px;
    flex: 1;
  }

  .tag-hint {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 5px;
  }

  /* Toggle group */
  .toggle-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .toggle-btn {
    padding: 7px 14px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--surface2);
    color: var(--text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Noto Sans JP', sans-serif;
  }

  .toggle-btn:hover { border-color: var(--accent); color: var(--text); }

  .toggle-btn.active {
    background: rgba(0, 229, 160, 0.15);
    border-color: var(--accent);
    color: var(--accent);
    font-weight: 500;
  }

  /* Divider */
  .divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 28px 0;
  }

  /* Right panel */
  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
  }

  .panel-title {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .panel-title::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 22px;
    background: var(--accent);
    border-radius: 3px;
  }

  .prompt-output {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    line-height: 1.8;
    color: #a8b4c8;
    white-space: pre-wrap;
    flex: 1;
    overflow-y: auto;
    max-height: calc(100vh - 300px);
  }

  .prompt-output .highlight-green { color: var(--accent); }
  .prompt-output .highlight-blue { color: #5599ff; }
  .prompt-output .highlight-red { color: var(--danger); }
  .prompt-output .highlight-yellow { color: var(--warning); }

  /* Buttons */
  .btn-generate {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, var(--accent), #00b37a);
    border: none;
    border-radius: 10px;
    color: #0d0f14;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.05em;
  }

  .btn-generate:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 24px rgba(0, 229, 160, 0.3);
  }

  .btn-generate:active { transform: translateY(0); }

  .btn-copy {
    padding: 10px 20px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .btn-copy:hover {
    border-color: var(--accent);
    color: var(--accent);
  }

  .btn-copy.copied {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(0, 229, 160, 0.1);
  }

  .btn-save {
    padding: 10px 20px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .btn-save:hover { border-color: var(--accent2); color: #5599ff; }
  .btn-save.saved { border-color: var(--accent2); color: #5599ff; background: rgba(0, 102, 255, 0.1); }

  .action-row {
    display: flex;
    gap: 10px;
  }

  /* Count badge */
  .char-count {
    font-size: 11px;
    color: var(--text-muted);
    text-align: right;
    margin-top: 4px;
  }

  /* Toast */
  .toast {
    position: fixed;
    bottom: 32px;
    right: 32px;
    background: var(--accent);
    color: #0d0f14;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 700;
    transform: translateY(80px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 9999;
  }

  .toast.show {
    transform: translateY(0);
    opacity: 1;
  }

  .btn-reset {
    padding: 10px 16px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .btn-reset:hover {
    border-color: var(--danger);
    color: var(--danger);
    background: rgba(255, 77, 109, 0.1);
  }

  /* Confirm dialog */
  .confirm-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 200;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
  }

  .confirm-overlay.show {
    opacity: 1;
    pointer-events: all;
  }

  .confirm-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px 32px;
    width: 320px;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.2s;
  }

  .confirm-overlay.show .confirm-box {
    transform: scale(1);
  }

  .confirm-box .confirm-icon { font-size: 36px; margin-bottom: 12px; }
  .confirm-box h3 { font-size: 16px; margin-bottom: 8px; color: var(--text); }
  .confirm-box p { font-size: 12px; color: var(--text-muted); margin-bottom: 20px; line-height: 1.6; }

  .confirm-btns { display: flex; gap: 10px; }

  .confirm-btns .btn-yes {
    flex: 1;
    padding: 10px;
    background: var(--danger);
    border: none;
    border-radius: 8px;
    color: white;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .confirm-btns .btn-yes:hover { opacity: 0.85; }

  .confirm-btns .btn-no {
    flex: 1;
    padding: 10px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .confirm-btns .btn-no:hover { border-color: var(--accent); color: var(--accent); }

  /* File drop */
  .file-drop-area {
    background: var(--surface2);
    border: 2px dashed var(--border);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
  }

  .file-drop-area:hover, .file-drop-area.dragover {
    border-color: var(--accent);
    background: rgba(0, 229, 160, 0.05);
  }

  .file-drop-icon { font-size: 28px; margin-bottom: 8px; }

  .file-drop-text {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.6;
  }

  .file-drop-text span { font-size: 11px; color: var(--accent); }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

  @media (max-width: 900px) {
    .layout { grid-template-columns: 1fr; }
    .right-panel { position: static; height: auto; }
    .left-panel { border-right: none; border-bottom: 1px solid var(--border); }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-icon">ğŸ¯</div>
  <div>
    <h1>Gig Scoutï½œæ¡ˆä»¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
    <p>æƒ…å ±ã‚’å…¥åŠ›ã—ã¦Manusã«é€ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ</p>
  </div>
</div>

<div class="layout">
  <!-- Left: Input -->
  <div class="left-panel">

    <!-- åŸºæœ¬æƒ…å ± -->
    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-blue"></div>
        <span class="section-title">åŸºæœ¬æƒ…å ±</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>ãŠåå‰ï¼ˆä»»æ„ï¼‰</label>
          <input type="text" id="name" placeholder="ä¾‹ï¼šãã‚‰">
        </div>
        <div class="form-group">
          <label>å¸Œæœ›ã‚¸ãƒ£ãƒ³ãƒ« ï¼Š</label>
          <input type="text" id="genre" placeholder="ä¾‹ï¼šGPTsä½œæˆä»£è¡Œ">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>é€±ã®ç¨¼åƒæ™‚é–“</label>
          <input type="text" id="hours" placeholder="ä¾‹ï¼š10æ™‚é–“">
        </div>
        <div class="form-group">
          <label>å¸Œæœ›æœ€ä½å ±é…¬</label>
          <input type="text" id="reward" placeholder="ä¾‹ï¼šæ™‚çµ¦1000å††ä»¥ä¸Š">
        </div>
      </div>

      <div class="form-group">
        <label>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°çµŒé¨“</label>
        <div class="toggle-group" id="experience-group">
          <button class="toggle-btn active" onclick="selectToggle(this, 'experience-group')">æœªçµŒé¨“</button>
          <button class="toggle-btn" onclick="selectToggle(this, 'experience-group')">å°‘ã—ã‚ã‚Š</button>
          <button class="toggle-btn" onclick="selectToggle(this, 'experience-group')">1å¹´ä»¥ä¸Š</button>
        </div>
      </div>

      <div class="form-group">
        <label>ä½œæ¥­ã‚¹ã‚¿ã‚¤ãƒ«</label>
        <input type="text" id="style" placeholder="ä¾‹ï¼šä¸€äººã§é»™ã€…ã¨ä½œæ¥­ã—ãŸã„ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãŒã‚ã‚Œã°å®‰å¿ƒ">
      </div>
    </div>

    <hr class="divider">

    <!-- ã‚¹ã‚­ãƒ« -->
    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-green"></div>
        <span class="section-title">ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>

      <div class="form-group">
        <label>å¾—æ„ãªä½œæ¥­</label>
        <input type="text" id="skills" placeholder="ä¾‹ï¼šGPTsè¨­è¨ˆãƒ»ä½œæˆã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã€AIæ´»ç”¨ã‚µãƒãƒ¼ãƒˆ">
      </div>

      <div class="form-group">
        <label>ä½¿ç”¨ãƒ„ãƒ¼ãƒ«</label>
        <input type="text" id="tools" placeholder="ä¾‹ï¼šChatGPTã€GPTsã€Canvaã€Excel">
      </div>

      <div class="form-group">
        <label>æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆEnterã§è¿½åŠ ï¼‰ï¼Š</label>
        <div class="tags-container" id="keywords-container" onclick="document.getElementById('keyword-input').focus()">
          <input class="tag-input" id="keyword-input" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦Enter">
        </div>
        <p class="tag-hint">ä¾‹ï¼šã€ŒGPTsã€ã€ŒAIæ´»ç”¨ã€ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã€</p>
      </div>
    </div>

    <hr class="divider">

    <!-- æ¡ä»¶ -->
    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-red"></div>
        <span class="section-title">NGæ¡ä»¶</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>
      <div class="tags-container" id="ng-container" onclick="document.getElementById('ng-input').focus()">
        <input class="tag-input" id="ng-input" placeholder="NGæ¡ä»¶ã‚’å…¥åŠ›ã—ã¦Enter">
      </div>
      <p class="tag-hint">ä¾‹ï¼šé¡”å‡ºã—å¿…é ˆã€é€šè©±å–¶æ¥­ã‚ã‚Šã€é«˜åº¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å¿…é ˆ</p>
    </div>

    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-blue"></div>
        <span class="section-title">Mustæ¡ä»¶ï¼ˆå¿…é ˆï¼‰</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>
      <div class="tags-container" id="must-container" onclick="document.getElementById('must-input').focus()">
        <input class="tag-input" id="must-input" placeholder="Mustæ¡ä»¶ã‚’å…¥åŠ›ã—ã¦Enter">
      </div>
      <p class="tag-hint">ä¾‹ï¼šæœªçµŒé¨“OKã€ãƒªãƒ¢ãƒ¼ãƒˆå®Œçµã€ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã§OK</p>
    </div>

    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-yellow"></div>
        <span class="section-title">Niceæ¡ä»¶ï¼ˆåŠ ç‚¹ï¼‰</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>
      <div class="tags-container" id="nice-container" onclick="document.getElementById('nice-input').focus()">
        <input class="tag-input" id="nice-input" placeholder="Niceæ¡ä»¶ã‚’å…¥åŠ›ã—ã¦Enter">
      </div>
      <p class="tag-hint">ä¾‹ï¼šç¶™ç¶šæ¡ˆä»¶ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚ã‚Šã€é€±5æ™‚é–“ä»¥å†…ã§å®Œçµ</p>
    </div>

    <hr class="divider">

    <!-- ãƒ¡ãƒ¢ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¸€æ‹¬å…¥åŠ› -->
    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-yellow"></div>
        <span class="section-title">ãƒ¡ãƒ¢ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¸€æ‹¬å…¥åŠ›</span>
        <span class="save-hint">ğŸ’¾ ä¿å­˜ã‚ã‚Š</span>
      </div>
      <p style="font-size:12px;color:var(--text-muted);margin-bottom:10px;">ãƒŠãƒ¬ãƒƒã‚¸ã‚„ãƒ¡ãƒ¢ã«ä¿å­˜ã—ã¦ã„ã‚‹æƒ…å ±ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æœ«å°¾ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚</p>
      <div class="file-drop-area" id="file-drop-area" onclick="document.getElementById('file-input').click()" ondragover="handleDragOver(event)" ondrop="handleDrop(event)">
        <div class="file-drop-icon">ğŸ“„</div>
        <div class="file-drop-text">ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—<br><span>ã¾ãŸã¯ ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠï¼ˆ.txt / .mdï¼‰</span></div>
        <input type="file" id="file-input" accept=".txt,.md" style="display:none" onchange="handleFileSelect(event)">
      </div>
      <div id="file-status" style="font-size:11px;color:var(--accent);margin-top:6px;display:none;"></div>
      <div class="form-group" style="margin-top:12px;">
        <label>è²¼ã‚Šä»˜ã‘ãŸãƒ¡ãƒ¢ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±</label>
        <textarea id="memo-text" placeholder="ãƒŠãƒ¬ãƒƒã‚¸ã«ä¿å­˜ã—ã¦ã„ã‚‹è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ã‚¹ã‚­ãƒ«è©³ç´°ã€å®Ÿç¸¾ãªã©ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æœ«å°¾ã«ã€Œ# å‚è€ƒæƒ…å ±ã€ã¨ã—ã¦è‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚" style="min-height:140px;"></textarea>
      </div>
      <button class="btn-copy" onclick="clearMemo()" style="font-size:12px;padding:7px 14px;">ğŸ—‘ï¸ ãƒ¡ãƒ¢ã‚’ã‚¯ãƒªã‚¢</button>
    </div>

    <hr class="divider">

    <!-- ã‚¹ãƒ—ã‚·URL -->
    <div class="section">
      <div class="section-header">
        <div class="section-badge badge-green"></div>
        <span class="section-title">å‡ºåŠ›å…ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ</span>
      </div>
      <div class="form-group">
        <label>Google ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆURL</label>
        <input type="text" id="sheet-url" placeholder="https://docs.google.com/spreadsheets/d/...">
      </div>
    </div>

    <button class="btn-generate" onclick="generatePrompt()">
      âœ¨ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹
    </button>

  </div>

  <!-- Right: Output -->
  <div class="right-panel">
    <div class="panel-header">
      <div class="panel-title">ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</div>
    </div>

    <div class="action-row">
      <button class="btn-copy" id="copy-btn" onclick="copyPrompt()">
        ğŸ“‹ ã‚³ãƒ”ãƒ¼
      </button>
      <button class="btn-save" id="save-btn" onclick="saveSettings()">
        ğŸ’¾ å›ºå®šæƒ…å ±ã‚’ä¿å­˜
      </button>
      <button class="btn-reset" id="reset-btn" onclick="confirmReset()">
        ğŸ—‘ï¸ å…¨ãƒªã‚»ãƒƒãƒˆ
      </button>
    </div>

    <div class="prompt-output" id="prompt-output">ã“ã“ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

å·¦å´ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦
ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚

ğŸ’¡ ãƒ’ãƒ³ãƒˆ
ãƒ»ã€Œå›ºå®šæƒ…å ±ã‚’ä¿å­˜ã€ã‚’æŠ¼ã™ã¨
ã€€æ¬¡å›èµ·å‹•æ™‚ã«è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™
ãƒ»ã‚¹ã‚­ãƒ«ãƒ»NGæ¡ä»¶ãƒ»Mustæ¡ä»¶ã¯
ã€€ä¿å­˜å¯¾è±¡ã§ã™
ãƒ»å¸Œæœ›ã‚¸ãƒ£ãƒ³ãƒ«ã¨æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯
ã€€æ¯å›å¤‰æ›´ã—ã¦ãŠä½¿ã„ãã ã•ã„</div>

    <div class="char-count" id="char-count"></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<!-- Confirm dialog -->
<div class="confirm-overlay" id="confirm-overlay">
  <div class="confirm-box">
    <div class="confirm-icon">ğŸ—‘ï¸</div>
    <h3>å…¨ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ</h3>
    <p>å…¥åŠ›ã—ãŸå†…å®¹ã¨ä¿å­˜ã—ãŸå›ºå®šæƒ…å ±ãŒ<br>å…¨ã¦å‰Šé™¤ã•ã‚Œã¾ã™ã€‚<br>ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚</p>
    <div class="confirm-btns">
      <button class="btn-yes" onclick="executeReset()">ãƒªã‚»ãƒƒãƒˆã™ã‚‹</button>
      <button class="btn-no" onclick="closeConfirm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>

<script>
  // ã‚¿ã‚°ç®¡ç†
  const tagData = {
    keywords: [],
    ng: [],
    must: [],
    nice: []
  };

  function setupTagInput(inputId, containerId, type, tagClass) {
    const input = document.getElementById(inputId);
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const val = this.value.trim();
        if (val) {
          addTag(type, val, containerId, tagClass);
          // ãƒã‚°ä¿®æ­£ï¼šç¢ºå®šå¾Œã«å€¤ã‚’å®Œå…¨ã‚¯ãƒªã‚¢
          this.value = '';
          setTimeout(() => { this.value = ''; }, 0);
        }
        return false;
      }
      if (e.key === 'Backspace' && !this.value && tagData[type].length > 0) {
        removeTag(type, tagData[type].length - 1, containerId, tagClass);
      }
    });
    // IMEç¢ºå®šå¾Œã®Enterã‚‚é˜²ã
    input.addEventListener('compositionend', function() {
      this._composing = false;
    });
    input.addEventListener('compositionstart', function() {
      this._composing = true;
    });
  }

  function addTag(type, value, containerId, tagClass) {
    if (tagData[type].includes(value)) return;
    tagData[type].push(value);
    renderTags(type, containerId, tagClass);
  }

  function removeTag(type, index, containerId, tagClass) {
    tagData[type].splice(index, 1);
    renderTags(type, containerId, tagClass);
  }

  function renderTags(type, containerId, tagClass) {
    const container = document.getElementById(containerId);
    const input = container.querySelector('.tag-input');
    container.querySelectorAll('.tag').forEach(t => t.remove());
    tagData[type].forEach((val, i) => {
      const tag = document.createElement('div');
      tag.className = `tag ${tagClass}`;
      tag.innerHTML = `${val}<span class="tag-remove" onclick="removeTag('${type}', ${i}, '${containerId}', '${tagClass}')">Ã—</span>`;
      container.insertBefore(tag, input);
    });
  }

  setupTagInput('keyword-input', 'keywords-container', 'keywords', '');
  setupTagInput('ng-input', 'ng-container', 'ng', 'ng');
  setupTagInput('must-input', 'must-container', 'must', 'must');
  setupTagInput('nice-input', 'nice-container', 'nice', 'nice');

  // Toggle
  function selectToggle(btn, groupId) {
    document.querySelectorAll(`#${groupId} .toggle-btn`).forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  // Generate
  function generatePrompt() {
    const name = document.getElementById('name').value.trim();
    const genre = document.getElementById('genre').value.trim();
    const hours = document.getElementById('hours').value.trim();
    const reward = document.getElementById('reward').value.trim();
    const style = document.getElementById('style').value.trim();
    const skills = document.getElementById('skills').value.trim();
    const tools = document.getElementById('tools').value.trim();
    const sheetUrl = document.getElementById('sheet-url').value.trim();
    const experience = document.querySelector('#experience-group .toggle-btn.active')?.textContent || 'æœªçµŒé¨“';

    const memo = document.getElementById('memo-text').value.trim();

    if (!genre) { showToast('âš ï¸ å¸Œæœ›ã‚¸ãƒ£ãƒ³ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
    if (tagData.keywords.length === 0) { showToast('âš ï¸ æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’1ã¤ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„'); return; }

    const ngList = tagData.ng.length > 0 ? tagData.ng.map(v => `ãƒ»${v}`).join('\n') : 'ãƒ»ï¼ˆãªã—ï¼‰';
    const mustList = tagData.must.length > 0 ? tagData.must.map(v => `ãƒ»${v}`).join('\n') : 'ãƒ»ï¼ˆãªã—ï¼‰';
    const niceList = tagData.nice.length > 0 ? tagData.nice.map(v => `ãƒ»${v}`).join('\n') : 'ãƒ»ï¼ˆãªã—ï¼‰';
    const keywords = tagData.keywords.map(k => `ã€Œ${k}ã€`).join('ãƒ»');
    const urlLine = sheetUrl ? `URLï¼š${sheetUrl}` : 'URLï¼šï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®URLã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼‰';

    const prompt = `ã‚ãªãŸã¯æ¡ˆä»¶ã‚¹ã‚«ã‚¦ã‚¿ãƒ¼ã§ã™ã€‚
ã€Œå¿œå‹Ÿã—ã¦æ¡ç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ã„æ¡ˆä»¶ã€ã‚’å„ªå…ˆã—ã¦ãã ã•ã„ã€‚
è¦‹æ „ãˆãŒè‰¯ã„ã ã‘ã®æ¡ˆä»¶ã‚ˆã‚Šã€ã‚¹ã‚­ãƒ«ãŒåˆã£ã¦ã„ã¦è¿”ä¿¡ç‡ãŒé«˜ãã†ãªæ¡ˆä»¶ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
éå‰°ã‚¢ã‚¯ã‚»ã‚¹ã¯ç¦æ­¢ã€‚å„ã‚µã‚¤ãƒˆæœ€å¤§10ä»¶ã€åˆè¨ˆæœ€å¤§30ä»¶ã€‚å–å¾—ã§ããªã„å ´åˆã¯ç†ç”±ã‚’è¨˜éŒ²ã€‚

# ç§ã®æƒ…å ±${name ? `\nãƒ»åå‰ï¼š${name}` : ''}
ãƒ»å¸Œæœ›ã‚¸ãƒ£ãƒ³ãƒ«ï¼š${genre}
ãƒ»é€±ã®ç¨¼åƒæ™‚é–“ï¼š${hours || 'ï¼ˆæœªå…¥åŠ›ï¼‰'}
ãƒ»å¸Œæœ›å ±é…¬ï¼š${reward || 'æ™‚çµ¦1000å††ä»¥ä¸Š'}
ãƒ»å¾—æ„ãªä½œæ¥­ï¼š${skills || 'ï¼ˆæœªå…¥åŠ›ï¼‰'}
ãƒ»ä½¿ç”¨ãƒ„ãƒ¼ãƒ«ï¼š${tools || 'ï¼ˆæœªå…¥åŠ›ï¼‰'}
ãƒ»ä½œæ¥­ã‚¹ã‚¿ã‚¤ãƒ«ï¼š${style || 'ï¼ˆæœªå…¥åŠ›ï¼‰'}
ãƒ»çµŒé¨“ï¼šã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°${experience}

# æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
${keywords}

# NGæ¡ä»¶ï¼ˆè©²å½“æ¡ˆä»¶ã¯é™¤å¤–ï¼‰
${ngList}

# Mustæ¡ä»¶ï¼ˆå¿…é ˆãƒ»æº€ãŸã•ãªã„å ´åˆã¯é™¤å¤–ï¼‰
${mustList}

# Niceæ¡ä»¶ï¼ˆåŠ ç‚¹ï¼‰
${niceList}

# å¯¾è±¡ã‚µã‚¤ãƒˆ
ãƒ»ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ¯ãƒ¼ã‚¯ã‚¹
ãƒ»ãƒ©ãƒ³ã‚µãƒ¼ã‚º
ãƒ»ã‚³ã‚³ãƒŠãƒ©ï¼ˆå…¬é–‹å‹Ÿé›†ãƒšãƒ¼ã‚¸ã®ã¿ï¼‰

# ãƒãƒƒãƒåº¦ã®è¨ˆç®—ãƒ«ãƒ¼ãƒ«ï¼ˆ0ã€œ100ï¼‰
ãƒ»Mustæ¡ä»¶ã‚’æº€ãŸã™ï¼š+30ï¼ˆæº€ãŸã•ãªã„å ´åˆã¯é™¤å¤–ï¼‰
ãƒ»NGæ¡ä»¶ã«è©²å½“ï¼šé™¤å¤–
ãƒ»å˜ä¾¡ãŒå¸Œæœ›ä»¥ä¸Šï¼š+25ï¼ˆä¸‹å›ã‚‹ï¼šé™¤å¤–ï¼‰
ãƒ»å¸Œæœ›ã‚¸ãƒ£ãƒ³ãƒ«ä¸€è‡´ï¼š+20ï¼ˆè¿‘ã„ï¼š+10ï¼‰
ãƒ»ç¶™ç¶šæ¡ˆä»¶ï¼š+15
ãƒ»æœªçµŒé¨“OKï¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚ã‚Šï¼ãƒ†ãƒ³ãƒ—ãƒ¬ã‚ã‚Šï¼šå„+5
ãƒ»å¿œå‹Ÿãƒãƒ¼ãƒ‰ãƒ«é«˜ã„ï¼ˆãƒ†ã‚¹ãƒˆï¼é•·æ–‡ï¼é¢è«‡å¤šã„ï¼‰ï¼šå„-5

# æŠ½å‡ºã™ã‚‹é …ç›®ï¼ˆæ¡ˆä»¶ã”ã¨ï¼‰
ãƒ»å–å¾—æ—¥
ãƒ»ã‚µã‚¤ãƒˆåï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ãƒ¯ãƒ¼ã‚¯ã‚¹ï¼ãƒ©ãƒ³ã‚µãƒ¼ã‚ºï¼ã‚³ã‚³ãƒŠãƒ©ã®ã„ãšã‚Œã‹ã‚’å¿…ãšè¨˜å…¥ï¼‰
ãƒ»æ¡ˆä»¶å
ãƒ»å ±é…¬ï¼ˆåŸæ–‡ãã®ã¾ã¾ï¼‰
ãƒ»ãƒãƒƒãƒåº¦ï¼ˆæ•°å€¤ï¼‰
ãƒ»ãƒãƒƒãƒåº¦ï¼ˆâ˜…â˜…â˜…ï¼â˜…â˜…â˜†ï¼â˜…â˜†â˜†ï¼‰
ãƒ»ãŠã™ã™ã‚ç†ç”±ï¼ˆ80æ–‡å­—ä»¥å†…ã€å…·ä½“çš„ã«ï¼‰
ãƒ»æ³¨æ„ç‚¹
ãƒ»ç· åˆ‡ãƒ»å‹Ÿé›†äººæ•°ï¼ˆã‚ã‚Œã°ï¼‰
ãƒ»URL
ãƒ»ææ¡ˆæ–‡ï¼ˆ300æ–‡å­—ä»¥å†…ãƒ»ã§ã™ãƒ»ã¾ã™èª¿ï¼‰

# ãƒãƒƒãƒåº¦ã®â˜…è¡¨ç¤ºåŸºæº–
â˜…â˜…â˜…ï¼ˆé«˜ã„ï¼‰ï¼š70ç‚¹ä»¥ä¸Š
â˜…â˜…â˜†ï¼ˆæ™®é€šï¼‰ï¼š40ã€œ69ç‚¹
â˜…â˜†â˜†ï¼ˆä½ã„ï¼‰ ï¼š39ç‚¹ä»¥ä¸‹

# å‡ºåŠ›ä»¶æ•°
ãƒ»å„ã‚µã‚¤ãƒˆæœ€å¤§10ä»¶ã€åˆè¨ˆæœ€å¤§30ä»¶
ãƒ»ãƒãƒƒãƒåº¦40ç‚¹æœªæº€ã¯å‡ºåŠ›ã—ãªã„
ãƒ»ãƒãƒƒãƒåº¦ã®é«˜ã„é †ã«ä¸¦ã¹ã‚‹

# ææ¡ˆæ–‡ã®ä½œæˆãƒ«ãƒ¼ãƒ«
ãƒ»300æ–‡å­—ä»¥å†…ã«åã‚ã‚‹ã“ã¨
ãƒ»ã§ã™ãƒ»ã¾ã™èª¿ã§æ›¸ã
ãƒ»æ§‹æˆï¼šâ‘ æ¡ˆä»¶ã¸ã®å…±æ„Ÿ â‘¡è‡ªåˆ†ã®å¼·ã¿ â‘¢ç›¸æ‰‹ç›®ç·šã®ãƒ¡ãƒªãƒƒãƒˆ â‘£ç· ã‚
ãƒ»æ¡ˆä»¶ã”ã¨ã«å†…å®¹ã‚’å¤‰ãˆã‚‹ã“ã¨
ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚ˆã†ãªæ–‡ç« ã«ã—ãªã„ã“ã¨${name ? `\nãƒ»åå‰ï¼ˆ${name}ï¼‰ã¯å…¥ã‚Œãªã„ã“ã¨` : ''}

# å‡ºåŠ›å½¢å¼
ä»¥ä¸‹ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«åˆ—ã‚’åˆ†ã‘ã¦è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚
${urlLine}

1è¡Œç›®ã¯ãƒ˜ãƒƒãƒ€ãƒ¼ãªã®ã§2è¡Œç›®ã‹ã‚‰è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚

ã€è¨˜å…¥å½¢å¼ã€‘
1æ¡ˆä»¶ç›®ï¼šA2ãƒ»B2ãƒ»C2ãƒ»D2ãƒ»E2ãƒ»F2ãƒ»G2ãƒ»H2ãƒ»I2ãƒ»J2ãƒ»K2
2æ¡ˆä»¶ç›®ï¼šA3ãƒ»B3ãƒ»C3ãƒ»D3ãƒ»E3ãƒ»F3ãƒ»G3ãƒ»H3ãƒ»I3ãƒ»J3ãƒ»K3
ä»¥é™åŒã˜å½¢å¼ã§ç¶šã‘ã‚‹

ã€åˆ—ã®å†…å®¹ã€‘
Aåˆ—ï¼šå–å¾—æ—¥
Båˆ—ï¼šã‚µã‚¤ãƒˆå
Cåˆ—ï¼šæ¡ˆä»¶å
Dåˆ—ï¼šå ±é…¬
Eåˆ—ï¼šãƒãƒƒãƒåº¦ï¼ˆæ•°å€¤ï¼‰
Fåˆ—ï¼šãƒãƒƒãƒåº¦ï¼ˆâ˜…ï¼‰
Gåˆ—ï¼šãŠã™ã™ã‚ç†ç”±
Håˆ—ï¼šæ³¨æ„ç‚¹
Iåˆ—ï¼šç· åˆ‡ãƒ»å‹Ÿé›†äººæ•°
Jåˆ—ï¼šURL
Kåˆ—ï¼šææ¡ˆæ–‡ï¼ˆ300æ–‡å­—ä»¥å†…ï¼‰

â€»å¿…ãšå„é …ç›®ã‚’å¯¾å¿œã™ã‚‹åˆ—ã«åˆ†ã‘ã¦è¨˜å…¥ã™ã‚‹ã“ã¨
â€»Aåˆ—ã«ã¾ã¨ã‚ã¦è¨˜å…¥ã—ãªã„ã“ã¨
â€»Båˆ—ã®ã‚µã‚¤ãƒˆåã¯å¿…ãšè¨˜å…¥ã™ã‚‹ã“ã¨

é–‹å§‹ã—ã¦ãã ã•ã„ã€‚${memo ? `\n\n# å‚è€ƒæƒ…å ±ï¼ˆå¿œå‹Ÿè€…ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°ï¼‰\n${memo}` : ''}`;

    document.getElementById('prompt-output').textContent = prompt;
    document.getElementById('char-count').textContent = `${prompt.length}æ–‡å­—`;
    showToast('âœ… ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼');
  }

  // Copy
  function copyPrompt() {
    const text = document.getElementById('prompt-output').textContent;
    if (!text || text.includes('ã“ã“ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™')) {
      showToast('âš ï¸ å…ˆã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
      return;
    }

    const btn = document.getElementById('copy-btn');

    const onSuccess = () => {
      btn.textContent = 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
      btn.classList.add('copied');
      showToast('ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
      setTimeout(() => {
        btn.textContent = 'ğŸ“‹ ã‚³ãƒ”ãƒ¼';
        btn.classList.remove('copied');
      }, 2000);
    };

    // ã¾ãšClipboard APIã‚’è©¦ã™
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text).then(onSuccess).catch(() => fallbackCopy(text, onSuccess));
    } else {
      fallbackCopy(text, onSuccess);
    }
  }

  function fallbackCopy(text, onSuccess) {
    // textarea ã‚’ä½¿ã£ãŸå¤å…¸çš„ãªã‚³ãƒ”ãƒ¼æ–¹æ³•
    const ta = document.createElement('textarea');
    ta.value = text;
    ta.style.position = 'fixed';
    ta.style.top = '-9999px';
    ta.style.left = '-9999px';
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try {
      document.execCommand('copy');
      onSuccess();
    } catch(e) {
      showToast('âš ï¸ ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„');
    }
    document.body.removeChild(ta);
  }

  // Save / Load
  function saveSettings() {
    const data = {
      skills: document.getElementById('skills').value,
      tools: document.getElementById('tools').value,
      style: document.getElementById('style').value,
      hours: document.getElementById('hours').value,
      reward: document.getElementById('reward').value,
      ng: [...tagData.ng],
      must: [...tagData.must],
      nice: [...tagData.nice],
      sheetUrl: document.getElementById('sheet-url').value,
      memo: document.getElementById('memo-text').value,
      experience: document.querySelector('#experience-group .toggle-btn.active')?.textContent || 'æœªçµŒé¨“'
    };
    localStorage.setItem('scout_settings', JSON.stringify(data));
    const btn = document.getElementById('save-btn');
    btn.textContent = 'âœ… ä¿å­˜ã—ã¾ã—ãŸï¼';
    btn.classList.add('saved');
    showToast('ğŸ’¾ å›ºå®šæƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
    setTimeout(() => {
      btn.textContent = 'ğŸ’¾ å›ºå®šæƒ…å ±ã‚’ä¿å­˜';
      btn.classList.remove('saved');
    }, 2000);
  }

  function loadSettings() {
    const raw = localStorage.getItem('scout_settings');
    if (!raw) return;
    try {
      const data = JSON.parse(raw);
      if (data.skills) document.getElementById('skills').value = data.skills;
      if (data.tools) document.getElementById('tools').value = data.tools;
      if (data.style) document.getElementById('style').value = data.style;
      if (data.hours) document.getElementById('hours').value = data.hours;
      if (data.reward) document.getElementById('reward').value = data.reward;
      if (data.sheetUrl) document.getElementById('sheet-url').value = data.sheetUrl;
      if (data.memo) document.getElementById('memo-text').value = data.memo;

      if (data.ng) { tagData.ng = data.ng; renderTags('ng', 'ng-container', 'ng'); }
      if (data.must) { tagData.must = data.must; renderTags('must', 'must-container', 'must'); }
      if (data.nice) { tagData.nice = data.nice; renderTags('nice', 'nice-container', 'nice'); }

      if (data.experience) {
        document.querySelectorAll('#experience-group .toggle-btn').forEach(btn => {
          btn.classList.toggle('active', btn.textContent === data.experience);
        });
      }
    } catch(e) {}
  }

  // File handling
  function handleDragOver(e) {
    e.preventDefault();
    document.getElementById('file-drop-area').classList.add('dragover');
  }

  function handleDrop(e) {
    e.preventDefault();
    document.getElementById('file-drop-area').classList.remove('dragover');
    const file = e.dataTransfer.files[0];
    if (file) readFile(file);
  }

  function handleFileSelect(e) {
    const file = e.target.files[0];
    if (file) readFile(file);
  }

  function readFile(file) {
    if (!file.name.match(/\.(txt|md)$/i)) {
      showToast('âš ï¸ .txt ã¾ãŸã¯ .md ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™');
      return;
    }
    const reader = new FileReader();
    reader.onload = function(e) {
      const current = document.getElementById('memo-text').value;
      document.getElementById('memo-text').value = current ? current + '\n\n' + e.target.result : e.target.result;
      const status = document.getElementById('file-status');
      status.textContent = `âœ… ${file.name} ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`;
      status.style.display = 'block';
      showToast(`ğŸ“„ ${file.name} ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
    };
    reader.readAsText(file, 'UTF-8');
  }

  function clearMemo() {
    document.getElementById('memo-text').value = '';
    document.getElementById('file-status').style.display = 'none';
    document.getElementById('file-input').value = '';
    showToast('ğŸ—‘ï¸ ãƒ¡ãƒ¢ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
  }

  // Reset
  function confirmReset() {
    document.getElementById('confirm-overlay').classList.add('show');
  }

  function closeConfirm() {
    document.getElementById('confirm-overlay').classList.remove('show');
  }

  function executeReset() {
    // å…¨å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢
    ['name','genre','hours','reward','style','skills','tools','sheet-url','memo-text'].forEach(id => {
      document.getElementById(id).value = '';
    });

    // ã‚¿ã‚°ã‚’å…¨ã‚¯ãƒªã‚¢
    tagData.keywords = []; renderTags('keywords', 'keywords-container', '');
    tagData.ng = [];       renderTags('ng', 'ng-container', 'ng');
    tagData.must = [];     renderTags('must', 'must-container', 'must');
    tagData.nice = [];     renderTags('nice', 'nice-container', 'nice');

    // ãƒˆã‚°ãƒ«ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
    document.querySelectorAll('#experience-group .toggle-btn').forEach((btn, i) => {
      btn.classList.toggle('active', i === 0);
    });

    // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡ºåŠ›ã‚’ã‚¯ãƒªã‚¢
    document.getElementById('prompt-output').textContent = 'ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚\n\nå·¦å´ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦\nã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚';
    document.getElementById('char-count').textContent = '';

    // ãƒ•ã‚¡ã‚¤ãƒ«çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢
    document.getElementById('file-status').style.display = 'none';
    document.getElementById('file-input').value = '';

    // localStorageã‚’å‰Šé™¤
    localStorage.removeItem('scout_settings');

    closeConfirm();
    showToast('ğŸ—‘ï¸ å…¨ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸï¼');
  }

  // Toast
  function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2500);
  }

  // Init
  loadSettings();
</script>
</body>
</html>